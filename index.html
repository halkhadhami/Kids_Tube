<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</title>
  <link rel="icon" type="image/png" href="https://github.com/halkhadhami/halkhadhami.github.io/blob/master/images/favicon.png?raw=true">
  
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  <!-- Plyr CSS -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  
  <style>
    :root{
      --bg:#0b1220;
      --card:#121b2f;
      --muted:#9fb0d0;
      --text:#eef3ff;
      --line: rgba(255,255,255,.10);
      --accent:#4ea1ff;
      
      /* Plyr Theme */
      --plyr-color-main: #4ea1ff;
      --plyr-video-background: #000;
      --plyr-menu-background: rgba(18,27,47,.98);
      --plyr-menu-color: #eef3ff;
      --plyr-range-thumb-height: 24px; /* ØªÙƒØ¨ÙŠØ± Ù…Ù‚Ø¨Ø¶ Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø³ */
      --plyr-range-thumb-width: 24px;
      --plyr-control-icon-size: 32px; /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø£ÙƒØ¨Ø± */
    }

    *{ box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; margin:0; }
    body{
      font-family: system-ui, -apple-system, sans-serif;
      background: #0b1220;
      color: var(--text);
      display: flex;
      flex-direction: column;
    }

    /* Topbar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(11,18,32,.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--line);
      padding: 14px 20px;
    }
    .title{ font-size: 18px; font-weight: 700; margin: 0; }
    .subtitle{ font-size: 12px; color: var(--muted); margin-top: 4px; }

    /* Main Content */
    .container{
      max-width: 1100px;
      width: 100%;
      margin: 0 auto;
      padding: 20px 16px;
      flex: 1;
    }

    /* Filters */
    .filters{
      background: var(--card);
      padding: 16px;
      border-radius: 16px;
      margin-bottom: 20px;
      display: grid;
      gap: 12px;
      grid-template-columns: 1fr 1fr; 
    }
    .filters .full{ grid-column: span 2; }
    
    .field input, .field select{
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.08);
      color: #fff;
      font-size: 14px;
      outline: none;
    }

    /* Grid */
    .grid{
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 16px;
    }

    /* Card */
    .item{
      background: var(--card);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--line);
      display: flex;
      flex-direction: column;
    }
    
    .item .head{ padding: 16px; }
    .item-title{ font-weight: 700; margin-bottom: 8px; font-size: 16px; }
    .badges{ display: flex; gap: 8px; font-size: 12px; color: var(--muted); }
    .badge{ background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 6px; }

    /* Viewer (Thumbnail) */
    .viewer{
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 */
      background: #000;
      cursor: pointer;
    }
    .viewer img{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .play-icon{
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.3);
    }
    .play-circle{
      width: 60px;
      height: 60px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    .play-circle:after{
      content: "";
      border-left: 16px solid #fff;
      border-top: 10px solid transparent;
      border-bottom: 10px solid transparent;
      margin-left: 6px;
    }

    /* Actions */
    .actions{
      padding: 12px;
      display: flex;
      gap: 10px;
      background: rgba(0,0,0,0.2);
    }
    .btn{
      flex: 1;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      font-size: 14px;
    }
    .btn-primary{ background: rgba(78,161,255,0.2); border-color: rgba(78,161,255,0.4); color: #fff; }

    /* Modal Player (Full Screen Fix) */
    #playerModal{
      position: fixed;
      inset: 0;
      background: #000;
      z-index: 9999;
      display: none;
      flex-direction: column;
    }
    #playerModal.open{ display: flex; }

    #playerHeader{
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background: #121b2f;
      gap: 12px;
    }
    #playerTitle{
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 14px;
      font-weight: 600;
    }
    #closeBtn{
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      padding: 8px;
    }

    #playerContainer{
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      overflow: hidden;
    }

    /* Force Plyr to fit mobile container */
    .plyr{ width: 100%; height: 100%; max-height: 100%; }
    .plyr__video-wrapper{ height: 100%; }
    
    /* Bigger Controls for Mobile */
    .plyr__controls__item{ margin-left: 10px; }
    .plyr--full-ui input[type=range] { height: 20px; } 

    /* Footer */
    .footer {
      background: #080d16;
      border-top: 1px solid var(--line);
      padding: 40px 20px;
      margin-top: auto;
    }
    .footer-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 20px;
    }
    .footer-logo h3 { margin: 0 0 8px; font-size: 1.2rem; color: #fff; }
    .footer-logo p { margin: 0; color: var(--muted); font-size: 0.9rem; }
    .footer-social { display: flex; gap: 20px; }
    .footer-social a {
      color: #fff;
      font-size: 1.2rem;
      opacity: 0.7;
      transition: 0.2s;
    }
    .footer-social a:hover { opacity: 1; color: var(--accent); }
    .footer-bottom {
      border-top: 1px solid rgba(255,255,255,0.05);
      margin-top: 30px;
      padding-top: 20px;
      color: var(--muted);
      font-size: 0.8rem;
      text-align: center;
    }
  </style>
</head>

<body>
  <header class="topbar">
    <h1 class="title">Hayl Al-Khadhami</h1>
    <div class="subtitle">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</div>
  </header>

  <main class="container">
    <section class="filters">
      <div class="field full">
        <input id="q" type="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯Ø±Ø³..." autocomplete="off">
      </div>
      <div class="field">
        <select id="category"></select>
      </div>
      <div class="field">
        <select id="time">
          <option value="all">ÙƒÙ„ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>
          <option value="today">Ø§Ù„ÙŠÙˆÙ…</option>
          <option value="week">Ø£Ø³Ø¨ÙˆØ¹</option>
          <option value="month">Ø´Ù‡Ø±</option>
        </select>
      </div>
    </section>

    <div id="list" class="grid"></div>
  </main>

  <footer class="footer">
    <div class="footer-content">
        <div class="footer-logo">
            <h3>Hayl Al-Khadhami</h3>
            <p>Automation Engineer | Researcher | Educator</p>
        </div>
        <div class="footer-social">
            <a href="https://www.linkedin.com/in/halkhadhami/" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            <a href="https://www.facebook.com/haylkhadhami" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="https://github.com/halkhadhami" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2026 Hayl Al-Khadhami. All rights reserved.</p>
    </div>
  </footer>

  <!-- Full Screen Modal Player -->
  <div id="playerModal">
    <div id="playerHeader">
      <button id="closeBtn">âœ•</button>
      <div id="playerTitle">Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</div>
    </div>
    <div id="playerContainer"></div>
  </div>

  <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
  <script>
    const SHEET_CSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTLx7eaIKwI4yVGNE84i_btsnqMDmQZwC7bQFkMyUiuMqo4nGyC-K7Jq0fYZ7TULPZi4JUv1RnqEkwr/pub?output=csv";
    
    // Categories
    const CATS = {
      Arabic: "Ø¹Ø±Ø¨ÙŠ", Art: "ÙÙ†", Chinese: "ØµÙŠÙ†ÙŠ", English: "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ",
      Fun: "ØªØ±ÙÙŠÙ‡", Islamic: "Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª", Kuran: "Ù‚Ø±Ø¢Ù†", Math: "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", Other: "Ø£Ø®Ø±Ù‰"
    };

    let allRows = [];
    let currentPlayer = null;

    // Elements
    const list = document.getElementById('list');
    const modal = document.getElementById('playerModal');
    const playerContainer = document.getElementById('playerContainer');
    const playerTitle = document.getElementById('playerTitle');
    
    // Helper: Drive & YouTube
    function getLinks(url) {
      const u = url || "";
      // YouTube
      const yt = u.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
      if(yt) return { type: 'youtube', id: yt[1], url: u };
      
      // Drive
      const dr = u.match(/\/d\/([^/]+)/) || u.match(/id=([^&]+)/);
      if(dr) {
        const id = dr[1];
        return { 
          type: 'drive', 
          id, 
          preview: `https://drive.google.com/file/d/${id}/preview`,
          download: `https://drive.google.com/uc?export=download&id=${id}`,
          thumb: `https://drive.google.com/thumbnail?id=${id}&sz=w640`
        };
      }
      return { type: 'file', url: u };
    }

    // Load Data
    fetch(SHEET_CSV).then(r => r.text()).then(txt => {
      const rows = txt.split(/\r?\n/).map(l => l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(c=>c.replace(/^"|"$/g,'')));
      const heads = rows[0];
      allRows = rows.slice(1).map(r => {
        let o = {}; heads.forEach((h,i) => o[h] = r[i]); return o;
      }).filter(o => o.Title && o.ContentURL);
      
      // Populate Cats
      const cats = [...new Set(allRows.map(r=>r.Category))];
      document.getElementById('category').innerHTML = `<option value="all">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯</option>` + 
        cats.map(c => `<option value="${c}">${CATS[c]||c}</option>`).join('');
      
      render(allRows);
    });

    // Render
    function render(rows) {
      list.innerHTML = rows.map(r => {
        const l = getLinks(r.ContentURL);
        let thumb = "https://via.placeholder.com/640x360/0b1220/333?text=Video";
        if(l.type === 'youtube') thumb = `https://img.youtube.com/vi/${l.id}/hqdefault.jpg`;
        if(l.type === 'drive') thumb = l.thumb;

        // Download Link
        let dl = l.type === 'drive' ? l.download : r.ContentURL;
        if(l.type === 'youtube') dl = r.ContentURL; // YouTube can't download direct

        return `
        <div class="item">
          <div class="head">
            <div class="item-title">${r.Title}</div>
            <div class="badges">
              <span class="badge">${CATS[r.Category]||r.Category}</span>
              <span class="badge">${r.DateUploaded||""}</span>
            </div>
          </div>
          <div class="viewer" onclick="play('${r.ContentURL}', '${r.Title.replace(/'/g,"")}')">
            <img src="${thumb}" loading="lazy">
            <div class="play-icon"><div class="play-circle"></div></div>
          </div>
          <div class="actions">
            <button class="btn btn-primary" onclick="play('${r.ContentURL}', '${r.Title.replace(/'/g,"")}')">â–¶ Ù…Ø´Ø§Ù‡Ø¯Ø©</button>
            <a href="${dl}" target="_blank" class="btn">â¬‡ ØªØ­Ù…ÙŠÙ„</a>
          </div>
        </div>`;
      }).join('');
    }

    // Player Logic
    window.play = (url, title) => {
      const l = getLinks(url);
      playerTitle.textContent = title;
      modal.classList.add('open');
      playerContainer.innerHTML = '<div style="color:#aaa">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';

      if(l.type === 'youtube') {
        playerContainer.innerHTML = `<div id="player" data-plyr-provider="youtube" data-plyr-embed-id="${l.id}"></div>`;
        currentPlayer = new Plyr('#player', {
          controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'fullscreen'],
          // ØªØ­Ø³ÙŠÙ† Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
          hideControls: true, 
          resetOnEnd: true
        });
      } else if (l.type === 'drive') {
        // Drive Iframe (Best for mobile compatibility)
        playerContainer.innerHTML = `<iframe src="${l.preview}" style="width:100%;height:100%;border:0" allowfullscreen></iframe>`;
      } else {
        // Direct Video
        playerContainer.innerHTML = `<video id="player" playsinline controls><source src="${url}"></video>`;
        currentPlayer = new Plyr('#player');
      }
    };

    // Close
    document.getElementById('closeBtn').onclick = () => {
      if(currentPlayer) currentPlayer.destroy();
      playerContainer.innerHTML = '';
      modal.classList.remove('open');
    };

    // Filters
    const filter = () => {
      const q = document.getElementById('q').value.toLowerCase();
      const c = document.getElementById('category').value;
      render(allRows.filter(r => 
        (r.Title.toLowerCase().includes(q)) && 
        (c === 'all' || r.Category === c)
      ));
    };
    ['q','category'].forEach(i => document.getElementById(i).oninput = filter);

  </script>
</body>
</html>
